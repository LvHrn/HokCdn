document.addEventListener('DOMContentLoaded', () => {
    initIndex();
});

/**
 * 初始化首页功能
 */
function initIndex() {
    initIndexBannerSwiper()
    initIndexPostList()
    initPostListWow()
}

/**
 * 激活轮播图功能
 */
function initIndexBannerSwiper() {
    if ($('.hok_index__banner .swiper-container').length !== 0) {
        let direction = 'horizontal';
        if (!Hok.IS_MOBILE && $('.hok_index__banner-recommend .item').length === 2) direction = 'vertical';
        new Swiper('.swiper-container', {
            keyboard: false,
            direction,
            loop: true,
            autoplay: true,
            mousewheel: true,
            pagination: { el: '.swiper-pagination' },
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev'
            }
        });
    }
}

/**
 * 初始化首页列表功能
 */
function initIndexPostList() {
    if (document.querySelector('.hok_index') === null) return;
    const getListMode = _ => {
        if (_.mode === 'default') {
            return `
                    <li class="hok_list__item wow default"> 
                        <a href="${_.permalink}" class="thumbnail" title="${_.title}" rel="noopener noreferrer">
                            <img width="100%" height="100%" class="lazyload" src="${_.lazyload}" data-src="${_.image[0]}" alt="${_.title}" />
                            <time datetime="${_.time}">${_.time}</time>
                        </a>
                        <div class="information">
                            <a href="${_.permalink}" class="title" title="${_.title}" rel="noopener noreferrer">
                                <span class="badge" style="display: ${_.type === 'sticky' ? 'inline-block' : 'none'}">置顶</span>${_.title}
                            </a>
                            <a class="abstract" href="${_.permalink}" title="文章摘要" rel="noopener noreferrer">${_.abstract}</a>
                            <div class="meta">
                                <ul class="items">
                                    <li>${_.created}</li>
                                    <li>${_.views} 阅读</li>
                                    <li>${_.commentsNum} 评论</li>
                                    <li>${_.agree} 点赞</li>
                                </ul>
                                <div class="last" style="display: ${_.category.length ? 'flex' : 'none'}">
                                    <svg t="1706285867769" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8534" width="270" height="270"><path d="M567.466667 490.666667h204.8c64 0 123.733333-25.6 166.4-68.266667s68.266667-102.4 68.266666-166.4c0-59.733333-21.333333-119.466667-64-162.133333l-4.266666-4.266667c-42.666667-42.666667-102.4-68.266667-166.4-68.266667s-123.733333 25.6-166.4 68.266667-68.266667 102.4-68.266667 166.4v204.8c0 17.066667 12.8 29.866667 29.866667 29.866667M597.333333 256c0-46.933333 17.066667-89.6 51.2-123.733333C682.666667 102.4 725.333333 85.333333 772.266667 85.333333c46.933333 0 89.6 17.066667 123.733333 51.2 29.866667 34.133333 46.933333 76.8 46.933333 119.466667 0 46.933333-17.066667 89.6-51.2 123.733333-34.133333 34.133333-76.8 51.2-123.733333 51.2h-170.666667V256z m-136.533333 277.333333H260.266667c-64 0-123.733333 25.6-166.4 68.266667S25.6 704 25.6 768s25.6 123.733333 68.266667 166.4 102.4 68.266667 166.4 68.266667 123.733333-25.6 166.4-68.266667 68.266667-102.4 68.266666-166.4v-204.8c0-17.066667-17.066667-29.866667-34.133333-29.866667m-29.866667 234.666667c0 46.933333-17.066667 89.6-51.2 123.733333-29.866667 29.866667-76.8 46.933333-119.466666 46.933334-46.933333 0-89.6-17.066667-123.733334-46.933334C102.4 857.6 85.333333 814.933333 85.333333 768c0-46.933333 17.066667-89.6 51.2-123.733333C170.666667 614.4 213.333333 597.333333 260.266667 597.333333h170.666666v170.666667zM938.666667 601.6c-42.666667-42.666667-102.4-68.266667-166.4-68.266667h-68.266667c-17.066667 0-29.866667 12.8-29.866667 29.866667 0 17.066667 12.8 29.866667 29.866667 29.866667h68.266667c46.933333 0 89.6 17.066667 123.733333 51.2 29.866667 34.133333 51.2 76.8 51.2 119.466666 0 46.933333-17.066667 89.6-51.2 123.733334-34.133333 34.133333-76.8 51.2-123.733333 51.2-46.933333 0-89.6-17.066667-119.466667-46.933334-34.133333-34.133333-55.466667-76.8-55.466667-123.733333v-204.8c0-17.066667-12.8-29.866667-29.866666-29.866667-17.066667 0-29.866667 12.8-29.866667 29.866667V768c0 64 25.6 123.733333 68.266667 166.4l4.266666 4.266667c42.666667 42.666667 102.4 64 162.133334 64 64 0 123.733333-25.6 166.4-68.266667s68.266667-102.4 68.266666-166.4-25.6-119.466667-68.266666-166.4z m-512-512C384 46.933333 324.266667 21.333333 260.266667 21.333333s-123.733333 25.6-166.4 68.266667S25.6 192 25.6 256s25.6 123.733333 68.266667 166.4l4.266666 4.266667c42.666667 42.666667 102.4 64 162.133334 64h204.8c17.066667 0 29.866667-12.8 29.866666-29.866667V256c0-64-25.6-119.466667-68.266666-166.4 0 4.266667 0 0 0 0z m4.266666 337.066667h-170.666666C213.333333 426.666667 170.666667 409.6 136.533333 379.733333 102.4 345.6 85.333333 302.933333 85.333333 256c0-46.933333 17.066667-89.6 51.2-123.733333C170.666667 102.4 213.333333 85.333333 260.266667 85.333333c46.933333 0 89.6 17.066667 123.733333 51.2 29.866667 34.133333 51.2 76.8 51.2 119.466667-4.266667 0-4.266667 170.666667-4.266667 170.666667z" fill="#806AB4" p-id="8535"></path><path d="M597.333333 281.6c0-38.4 17.066667-76.8 42.666667-106.666667 29.866667-29.866667 64-42.666667 106.666667-42.666666 38.4 0 76.8 17.066667 106.666666 42.666666 25.6 29.866667 42.666667 64 42.666667 102.4 0 38.4-17.066667 76.8-42.666667 106.666667-29.866667 29.866667-64 42.666667-106.666666 42.666667H597.333333V281.6z m-166.4 465.066667c0 38.4-12.8 76.8-42.666666 106.666666s-64 46.933333-106.666667 46.933334c-38.4 0-76.8-12.8-106.666667-42.666667s-42.666667-64-42.666666-106.666667c0-38.4 12.8-76.8 42.666666-106.666666 25.6-29.866667 64-46.933333 102.4-46.933334H426.666667c4.266667 0 4.266667 149.333333 4.266666 149.333334z" fill="#FAD007" p-id="8536"></path></svg>
                                    <a class="link" rel="noopener noreferrer" href="${_.category.length && _.category[0].permalink}">${_.category.length && _.category[0].name}</a>
                                </div>
                            </div>
                        </div>
                    </li>
                `;
        } else if (_.mode === 'single') {
            return `
                    <li class="hok_list__item wow single">
                        <div class="information">
                            <a href="${_.permalink}" class="title" title="${_.title}" rel="noopener noreferrer">
                                <span class="badge" style="display: ${_.type === 'sticky' ? 'inline-block' : 'none'}">置顶</span>${_.title}
                            </a>
                            <div class="meta">
                                <ul class="items">
                                    <li>${_.created}</li>
                                    <li>${_.views} 阅读</li>
                                    <li>${_.commentsNum} 评论</li>
                                    <li>${_.agree} 点赞</li>
                                </ul>
                                <div class="last" style="display: ${_.category.length ? 'flex' : 'none'}">
                                    <svg t="1706285867769" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8534" width="270" height="270"><path d="M567.466667 490.666667h204.8c64 0 123.733333-25.6 166.4-68.266667s68.266667-102.4 68.266666-166.4c0-59.733333-21.333333-119.466667-64-162.133333l-4.266666-4.266667c-42.666667-42.666667-102.4-68.266667-166.4-68.266667s-123.733333 25.6-166.4 68.266667-68.266667 102.4-68.266667 166.4v204.8c0 17.066667 12.8 29.866667 29.866667 29.866667M597.333333 256c0-46.933333 17.066667-89.6 51.2-123.733333C682.666667 102.4 725.333333 85.333333 772.266667 85.333333c46.933333 0 89.6 17.066667 123.733333 51.2 29.866667 34.133333 46.933333 76.8 46.933333 119.466667 0 46.933333-17.066667 89.6-51.2 123.733333-34.133333 34.133333-76.8 51.2-123.733333 51.2h-170.666667V256z m-136.533333 277.333333H260.266667c-64 0-123.733333 25.6-166.4 68.266667S25.6 704 25.6 768s25.6 123.733333 68.266667 166.4 102.4 68.266667 166.4 68.266667 123.733333-25.6 166.4-68.266667 68.266667-102.4 68.266666-166.4v-204.8c0-17.066667-17.066667-29.866667-34.133333-29.866667m-29.866667 234.666667c0 46.933333-17.066667 89.6-51.2 123.733333-29.866667 29.866667-76.8 46.933333-119.466666 46.933334-46.933333 0-89.6-17.066667-123.733334-46.933334C102.4 857.6 85.333333 814.933333 85.333333 768c0-46.933333 17.066667-89.6 51.2-123.733333C170.666667 614.4 213.333333 597.333333 260.266667 597.333333h170.666666v170.666667zM938.666667 601.6c-42.666667-42.666667-102.4-68.266667-166.4-68.266667h-68.266667c-17.066667 0-29.866667 12.8-29.866667 29.866667 0 17.066667 12.8 29.866667 29.866667 29.866667h68.266667c46.933333 0 89.6 17.066667 123.733333 51.2 29.866667 34.133333 51.2 76.8 51.2 119.466666 0 46.933333-17.066667 89.6-51.2 123.733334-34.133333 34.133333-76.8 51.2-123.733333 51.2-46.933333 0-89.6-17.066667-119.466667-46.933334-34.133333-34.133333-55.466667-76.8-55.466667-123.733333v-204.8c0-17.066667-12.8-29.866667-29.866666-29.866667-17.066667 0-29.866667 12.8-29.866667 29.866667V768c0 64 25.6 123.733333 68.266667 166.4l4.266666 4.266667c42.666667 42.666667 102.4 64 162.133334 64 64 0 123.733333-25.6 166.4-68.266667s68.266667-102.4 68.266666-166.4-25.6-119.466667-68.266666-166.4z m-512-512C384 46.933333 324.266667 21.333333 260.266667 21.333333s-123.733333 25.6-166.4 68.266667S25.6 192 25.6 256s25.6 123.733333 68.266667 166.4l4.266666 4.266667c42.666667 42.666667 102.4 64 162.133334 64h204.8c17.066667 0 29.866667-12.8 29.866666-29.866667V256c0-64-25.6-119.466667-68.266666-166.4 0 4.266667 0 0 0 0z m4.266666 337.066667h-170.666666C213.333333 426.666667 170.666667 409.6 136.533333 379.733333 102.4 345.6 85.333333 302.933333 85.333333 256c0-46.933333 17.066667-89.6 51.2-123.733333C170.666667 102.4 213.333333 85.333333 260.266667 85.333333c46.933333 0 89.6 17.066667 123.733333 51.2 29.866667 34.133333 51.2 76.8 51.2 119.466667-4.266667 0-4.266667 170.666667-4.266667 170.666667z" fill="#806AB4" p-id="8535"></path><path d="M597.333333 281.6c0-38.4 17.066667-76.8 42.666667-106.666667 29.866667-29.866667 64-42.666667 106.666667-42.666666 38.4 0 76.8 17.066667 106.666666 42.666666 25.6 29.866667 42.666667 64 42.666667 102.4 0 38.4-17.066667 76.8-42.666667 106.666667-29.866667 29.866667-64 42.666667-106.666666 42.666667H597.333333V281.6z m-166.4 465.066667c0 38.4-12.8 76.8-42.666666 106.666666s-64 46.933333-106.666667 46.933334c-38.4 0-76.8-12.8-106.666667-42.666667s-42.666667-64-42.666666-106.666667c0-38.4 12.8-76.8 42.666666-106.666666 25.6-29.866667 64-46.933333 102.4-46.933334H426.666667c4.266667 0 4.266667 149.333333 4.266666 149.333334z" fill="#FAD007" p-id="8536"></path></svg>
                                    <a class="link" rel="noopener noreferrer" href="${_.category.length && _.category[0].permalink}">${_.category.length && _.category[0].name}</a>
                                </div>
                            </div>
                        </div>
                        <a href="${_.permalink}" class="thumbnail" title="${_.title}" rel="noopener noreferrer">
                            <img width="100%" height="100%" class="lazyload" src="${_.lazyload}" data-src="${_.image[0]}" alt="${_.title}" />
                            <time datetime="${_.time}">${_.time}</time>
                        </a>
                        <div class="information" style="margin-bottom: 0;">
                            <a class="abstract" href="${_.permalink}" title="文章摘要" rel="noopener noreferrer">${_.abstract}</a>
                        </div>
                    </li>
                `;
        } else if (_.mode === 'multiple') {
            return `
                    <li class="hok_list__item wow multiple">
                        <div class="information">
                            <a href="${_.permalink}" class="title" title="${_.title}" rel="noopener noreferrer">
                                <span class="badge" style="display: ${_.type === 'sticky' ? 'inline-block' : 'none'}">置顶</span>${_.title}
                            </a>
                            <a class="abstract" href="${_.permalink}" title="文章摘要" rel="noopener noreferrer">${_.abstract}</a>
                        </div>
                        <a href="${_.permalink}" class="thumbnail" title="${_.title}" rel="noopener noreferrer">
                            ${_.image
                    .map((item, index) => {
                        if (index < 3) {
                            return `<img width="100%" height="100%" class="lazyload" src="${_.lazyload}" data-src="${item}" alt="${_.title}" />`;
                        }
                    })
                    .join('')}
                        </a>
                        <div class="meta">
                            <ul class="items">
                                <li>${_.created}</li>
                                <li>${_.views} 阅读</li>
                                <li>${_.commentsNum} 评论</li>
                                <li>${_.agree} 点赞</li>
                            </ul>
                            <div class="last" style="display: ${_.category.length ? 'flex' : 'none'}">
                                <svg t="1706285867769" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8534" width="270" height="270"><path d="M567.466667 490.666667h204.8c64 0 123.733333-25.6 166.4-68.266667s68.266667-102.4 68.266666-166.4c0-59.733333-21.333333-119.466667-64-162.133333l-4.266666-4.266667c-42.666667-42.666667-102.4-68.266667-166.4-68.266667s-123.733333 25.6-166.4 68.266667-68.266667 102.4-68.266667 166.4v204.8c0 17.066667 12.8 29.866667 29.866667 29.866667M597.333333 256c0-46.933333 17.066667-89.6 51.2-123.733333C682.666667 102.4 725.333333 85.333333 772.266667 85.333333c46.933333 0 89.6 17.066667 123.733333 51.2 29.866667 34.133333 46.933333 76.8 46.933333 119.466667 0 46.933333-17.066667 89.6-51.2 123.733333-34.133333 34.133333-76.8 51.2-123.733333 51.2h-170.666667V256z m-136.533333 277.333333H260.266667c-64 0-123.733333 25.6-166.4 68.266667S25.6 704 25.6 768s25.6 123.733333 68.266667 166.4 102.4 68.266667 166.4 68.266667 123.733333-25.6 166.4-68.266667 68.266667-102.4 68.266666-166.4v-204.8c0-17.066667-17.066667-29.866667-34.133333-29.866667m-29.866667 234.666667c0 46.933333-17.066667 89.6-51.2 123.733333-29.866667 29.866667-76.8 46.933333-119.466666 46.933334-46.933333 0-89.6-17.066667-123.733334-46.933334C102.4 857.6 85.333333 814.933333 85.333333 768c0-46.933333 17.066667-89.6 51.2-123.733333C170.666667 614.4 213.333333 597.333333 260.266667 597.333333h170.666666v170.666667zM938.666667 601.6c-42.666667-42.666667-102.4-68.266667-166.4-68.266667h-68.266667c-17.066667 0-29.866667 12.8-29.866667 29.866667 0 17.066667 12.8 29.866667 29.866667 29.866667h68.266667c46.933333 0 89.6 17.066667 123.733333 51.2 29.866667 34.133333 51.2 76.8 51.2 119.466666 0 46.933333-17.066667 89.6-51.2 123.733334-34.133333 34.133333-76.8 51.2-123.733333 51.2-46.933333 0-89.6-17.066667-119.466667-46.933334-34.133333-34.133333-55.466667-76.8-55.466667-123.733333v-204.8c0-17.066667-12.8-29.866667-29.866666-29.866667-17.066667 0-29.866667 12.8-29.866667 29.866667V768c0 64 25.6 123.733333 68.266667 166.4l4.266666 4.266667c42.666667 42.666667 102.4 64 162.133334 64 64 0 123.733333-25.6 166.4-68.266667s68.266667-102.4 68.266666-166.4-25.6-119.466667-68.266666-166.4z m-512-512C384 46.933333 324.266667 21.333333 260.266667 21.333333s-123.733333 25.6-166.4 68.266667S25.6 192 25.6 256s25.6 123.733333 68.266667 166.4l4.266666 4.266667c42.666667 42.666667 102.4 64 162.133334 64h204.8c17.066667 0 29.866667-12.8 29.866666-29.866667V256c0-64-25.6-119.466667-68.266666-166.4 0 4.266667 0 0 0 0z m4.266666 337.066667h-170.666666C213.333333 426.666667 170.666667 409.6 136.533333 379.733333 102.4 345.6 85.333333 302.933333 85.333333 256c0-46.933333 17.066667-89.6 51.2-123.733333C170.666667 102.4 213.333333 85.333333 260.266667 85.333333c46.933333 0 89.6 17.066667 123.733333 51.2 29.866667 34.133333 51.2 76.8 51.2 119.466667-4.266667 0-4.266667 170.666667-4.266667 170.666667z" fill="#806AB4" p-id="8535"></path><path d="M597.333333 281.6c0-38.4 17.066667-76.8 42.666667-106.666667 29.866667-29.866667 64-42.666667 106.666667-42.666666 38.4 0 76.8 17.066667 106.666666 42.666666 25.6 29.866667 42.666667 64 42.666667 102.4 0 38.4-17.066667 76.8-42.666667 106.666667-29.866667 29.866667-64 42.666667-106.666666 42.666667H597.333333V281.6z m-166.4 465.066667c0 38.4-12.8 76.8-42.666666 106.666666s-64 46.933333-106.666667 46.933334c-38.4 0-76.8-12.8-106.666667-42.666667s-42.666667-64-42.666666-106.666667c0-38.4 12.8-76.8 42.666666-106.666666 25.6-29.866667 64-46.933333 102.4-46.933334H426.666667c4.266667 0 4.266667 149.333333 4.266666 149.333334z" fill="#FAD007" p-id="8536"></path></svg>
                                <a class="link" rel="noopener noreferrer" href="${_.category.length && _.category[0].permalink}">${_.category.length && _.category[0].name}</a>
                            </div>
                        </div>
                    </li>
                `;
        } else {
            return `
                    <li class="hok_list__item wow none">
                        <div class="information">
                            <a href="${_.permalink}" class="title" title="${_.title}" rel="noopener noreferrer">
                                <span class="badge" style="display: ${_.type === 'sticky' ? 'inline-block' : 'none'}">置顶</span>${_.title}
                            </a>
                            <a class="abstract" href="${_.permalink}" title="文章摘要" rel="noopener noreferrer">${_.abstract}</a>
                            <div class="meta">
                                <ul class="items">
                                    <li>${_.created}</li>
                                    <li>${_.views} 阅读</li>
                                    <li>${_.commentsNum} 评论</li>
                                    <li>${_.agree} 点赞</li>
                                </ul>
                                <div class="last" style="display: ${_.category.length ? 'flex' : 'none'}">
                                    <svg t="1706285867769" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8534" width="270" height="270"><path d="M567.466667 490.666667h204.8c64 0 123.733333-25.6 166.4-68.266667s68.266667-102.4 68.266666-166.4c0-59.733333-21.333333-119.466667-64-162.133333l-4.266666-4.266667c-42.666667-42.666667-102.4-68.266667-166.4-68.266667s-123.733333 25.6-166.4 68.266667-68.266667 102.4-68.266667 166.4v204.8c0 17.066667 12.8 29.866667 29.866667 29.866667M597.333333 256c0-46.933333 17.066667-89.6 51.2-123.733333C682.666667 102.4 725.333333 85.333333 772.266667 85.333333c46.933333 0 89.6 17.066667 123.733333 51.2 29.866667 34.133333 46.933333 76.8 46.933333 119.466667 0 46.933333-17.066667 89.6-51.2 123.733333-34.133333 34.133333-76.8 51.2-123.733333 51.2h-170.666667V256z m-136.533333 277.333333H260.266667c-64 0-123.733333 25.6-166.4 68.266667S25.6 704 25.6 768s25.6 123.733333 68.266667 166.4 102.4 68.266667 166.4 68.266667 123.733333-25.6 166.4-68.266667 68.266667-102.4 68.266666-166.4v-204.8c0-17.066667-17.066667-29.866667-34.133333-29.866667m-29.866667 234.666667c0 46.933333-17.066667 89.6-51.2 123.733333-29.866667 29.866667-76.8 46.933333-119.466666 46.933334-46.933333 0-89.6-17.066667-123.733334-46.933334C102.4 857.6 85.333333 814.933333 85.333333 768c0-46.933333 17.066667-89.6 51.2-123.733333C170.666667 614.4 213.333333 597.333333 260.266667 597.333333h170.666666v170.666667zM938.666667 601.6c-42.666667-42.666667-102.4-68.266667-166.4-68.266667h-68.266667c-17.066667 0-29.866667 12.8-29.866667 29.866667 0 17.066667 12.8 29.866667 29.866667 29.866667h68.266667c46.933333 0 89.6 17.066667 123.733333 51.2 29.866667 34.133333 51.2 76.8 51.2 119.466666 0 46.933333-17.066667 89.6-51.2 123.733334-34.133333 34.133333-76.8 51.2-123.733333 51.2-46.933333 0-89.6-17.066667-119.466667-46.933334-34.133333-34.133333-55.466667-76.8-55.466667-123.733333v-204.8c0-17.066667-12.8-29.866667-29.866666-29.866667-17.066667 0-29.866667 12.8-29.866667 29.866667V768c0 64 25.6 123.733333 68.266667 166.4l4.266666 4.266667c42.666667 42.666667 102.4 64 162.133334 64 64 0 123.733333-25.6 166.4-68.266667s68.266667-102.4 68.266666-166.4-25.6-119.466667-68.266666-166.4z m-512-512C384 46.933333 324.266667 21.333333 260.266667 21.333333s-123.733333 25.6-166.4 68.266667S25.6 192 25.6 256s25.6 123.733333 68.266667 166.4l4.266666 4.266667c42.666667 42.666667 102.4 64 162.133334 64h204.8c17.066667 0 29.866667-12.8 29.866666-29.866667V256c0-64-25.6-119.466667-68.266666-166.4 0 4.266667 0 0 0 0z m4.266666 337.066667h-170.666666C213.333333 426.666667 170.666667 409.6 136.533333 379.733333 102.4 345.6 85.333333 302.933333 85.333333 256c0-46.933333 17.066667-89.6 51.2-123.733333C170.666667 102.4 213.333333 85.333333 260.266667 85.333333c46.933333 0 89.6 17.066667 123.733333 51.2 29.866667 34.133333 51.2 76.8 51.2 119.466667-4.266667 0-4.266667 170.666667-4.266667 170.666667z" fill="#806AB4" p-id="8535"></path><path d="M597.333333 281.6c0-38.4 17.066667-76.8 42.666667-106.666667 29.866667-29.866667 64-42.666667 106.666667-42.666666 38.4 0 76.8 17.066667 106.666666 42.666666 25.6 29.866667 42.666667 64 42.666667 102.4 0 38.4-17.066667 76.8-42.666667 106.666667-29.866667 29.866667-64 42.666667-106.666666 42.666667H597.333333V281.6z m-166.4 465.066667c0 38.4-12.8 76.8-42.666666 106.666666s-64 46.933333-106.666667 46.933334c-38.4 0-76.8-12.8-106.666667-42.666667s-42.666667-64-42.666666-106.666667c0-38.4 12.8-76.8 42.666666-106.666666 25.6-29.866667 64-46.933333 102.4-46.933334H426.666667c4.266667 0 4.266667 149.333333 4.266666 149.333334z" fill="#FAD007" p-id="8536"></path></svg>
                                    <a class="link" rel="noopener noreferrer" href="${_.category.length && _.category[0].permalink}">${_.category.length && _.category[0].name}</a>
                                </div>
                            </div>
                        </div>
                    </li>
                `;
        }
    };

    let queryData = { page: window.Hok.PAGE_INDEX, pageSize: window.Hok.PAGE_SIZE, type: 'created' };
    const initDom = () => {
        $('.hok_index__list .hok_list').html('');
        $('.hok_load').show();
        let activeItem = $('.hok_index__title-title .item[data-type="' + queryData.type + '"]');
        activeItem.addClass('active').siblings().removeClass('active');
    };
    const pushDom = () => {
        return new Promise((reslove, reject) => {
            $('.hok_load').attr('loading', true);
            $('.hok_load').html('loading...');
            $('.hok_index__list .hok_list__loading').show();
            $.ajax({
                url: Hok.BASE_API,
                type: 'POST',
                dataType: 'json',
                data: {
                    routeType: 'publish_list',
                    page: queryData.page,
                    pageSize: queryData.pageSize,
                    type: queryData.type
                },
                success(res) {
                    if (res.data.length === 0) {
                        $('.hok_load').removeAttr('loading');
                        $('.hok_load').html('查看更多');
                        $('.hok_load').hide();
                        $('.hok_index__list .hok_list__loading').hide();
                        return Qmsg.warning('没有更多内容了');
                    }
                    res.data.forEach(_ => $('.hok_index__list .hok_list').append(getListMode(_)));
                    initLanguageChoose()
                    $('.hok_load').removeAttr('loading');
                    $('.hok_load').html('查看更多');
                    $('.hok_index__list .hok_list__loading').hide();
                    reslove(res.data.length > 0 ? res.data.length - 1 : 0);
                }
            });
        });
    };
    initDom();
    pushDom();
    $('.hok_index__title-title .item').on('click', async function () {
        if ($(this).attr('data-type') === queryData.type) return;
        queryData = { page: window.Hok.PAGE_INDEX, pageSize: window.Hok.PAGE_SIZE, type: $(this).attr('data-type') };
        initDom();
        pushDom();
    });
    $('.hok_load').on('click', async function () {
        if ($(this).attr('loading')) return;
        queryData.page++;
        let length = await pushDom();
        length = $('.hok_index__list .hok_list .hok_list__item').length - length;
        const queryElement = `.hok_index__list .hok_list .hok_list__item:nth-child(${length})`;
        const offset = $(queryElement).offset().top - $('.hok_header').height();
        window.scrollTo({ top: offset - 15, behavior: 'smooth' });
    });
}

/**
 * 激活首页文章列表特效
 */
function initPostListWow() {
    const wow = $('.hok_index__list').attr('data-wow');
    if (wow !== 'off' && wow) new WOW({
        boxClass: 'wow',
        animateClass: `animated ${wow}`,
        offset: 0,
        mobile: true,
        live: true,
        scrollContainer: null
    }).init();
}