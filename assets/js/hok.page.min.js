function initCustomPage(){initArchiveListEffect(),initCensusPage(),initLeavingPage()}function initArchiveListEffect(){const t=$(".hok_archive__list").attr("data-wow");"off"!==t&&t&&new WOW({boxClass:"wow",animateClass:"animated ".concat(t),offset:0,mobile:!0,live:!0,scrollContainer:null}).init()}function initCensusPage(){null!==document.querySelector(".hok_census__basic")&&(initCensusData(),initCensusCategory(),initCommentLately(),initArchive())}function initCensusData(){function t(){$.ajax({url:Hok.BASE_API,type:"POST",dataType:"json",data:{routeType:"server_status"},success(s){s.status||Qmsg.warning("服务器接口异常！");{$(".hok_census__server-item .count .core").html(`${s.cpu[1]} 核`),$(".hok_census__server-item .count .ram").html(`${o(s.memory.memTotal)}`),$(".hok_census__server-item .count .up").html(`总发送：${e(s.upTotal)}`),$(".hok_census__server-item .count .down").html(`总接收：${e(s.downTotal)}`);const t=new Date,l=String(t.getHours()).padStart(2,0),c=String(t.getMinutes()).padStart(2,0),d=String(t.getSeconds()).padStart(2,0),u=`${l}:${c}:${d}`;a.push(u),i.push(s.up),n.push(s.down),a.length>5&&a.shift(),i.length>5&&i.shift(),n.length>5&&n.shift(),r.setOption({title:{subtext:"单位 KB/s"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},xAxis:{axisTick:{show:!1},type:"category",boundaryGap:!1,data:a},yAxis:{type:"value"},series:[{type:"line",name:"上行",smooth:!0,showSymbol:!1,itemStyle:{normal:{color:"#f39494",areaStyle:{color:"#f39494"},lineStyle:{width:2,color:"#f39494"}}},stack:"总量",data:i},{type:"line",name:"下行",smooth:!0,showSymbol:!1,itemStyle:{normal:{color:"#9dd3e8",areaStyle:{color:"#9dd3e8"},lineStyle:{width:2,color:"#9dd3e8"}}},stack:"总量",data:n}]})}{const t=s.cpu[0],e=Math.round(s.memory.memRealUsed/s.memory.memTotal*1e3)/10,o=Math.round(s.memory.memCached/s.memory.memTotal*1e3)/10,a=Math.round(s.memory.memBuffers/s.memory.memTotal*1e3)/10,i=Math.round(s.load.one/s.load.max*100)>100?100:Math.round(s.load.one/s.load.max*100);c.setOption({title:{subtext:"单位 百分比"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"3%",bottom:"3%",containLabel:!0},xAxis:{type:"category",axisTick:{show:!1},data:["CPU占用","内存占用","系统缓冲","内存缓冲","系统负载"]},yAxis:{type:"value",max:100},series:{data:[{name:"CPU占用",value:t,itemStyle:{color:"#b3c25a"}},{name:"内存占用",value:e,itemStyle:{color:"#67b580"}},{name:"系统缓冲",value:a,itemStyle:{color:"#86ba71"}},{name:"内存缓冲",value:o,itemStyle:{color:"#feb041"}},{name:"系统负载",value:i,itemStyle:{color:"#fd7e55"}}],type:"bar",showBackground:!0,label:{show:!0,color:"#ffffff",formatter:t=>`${t.data.value}%`},backgroundStyle:{color:"rgba(180, 180, 180, 0.2)"}}})}setTimeout(t,2e3)}})}const e=t=>{if(!t)return"0 B";const e=1e3,o=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],a=Math.floor(Math.log(t)/Math.log(e));return(t/Math.pow(e,a)).toPrecision(3)+" "+o[a]},o=t=>t<1024?parseInt(t)+" MB":parseInt(t/1024)+" GB",a=[],i=[],n=[],s=document.querySelector("#flow"),l=document.querySelector("#work"),r=s&&echarts.init(s),c=l&&echarts.init(l);s&&l&&t()}function initCensusCategory(){const t=document.querySelector("#category"),e=echarts.init(t),o=[];$(".hok_census__basic-item.category ul li").each((t,e)=>{o.push({name:e.getAttribute("data-name"),value:e.getAttribute("data-value")})}),e.setOption({tooltip:{trigger:"item"},series:[{type:"pie",roseType:"area",itemStyle:{borderRadius:8},data:o}]})}function initCommentLately(){const t=document.querySelector("#lately"),e=echarts.init(t);$.ajax({url:Hok.BASE_API,type:"POST",dataType:"json",data:{routeType:"comment_lately"},success(t){e.setOption({title:{subtext:"单位 数量"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},grid:{left:"3%",right:"3%",bottom:"3%",containLabel:!0},xAxis:{type:"category",axisTick:{show:!1},data:t.categories},yAxis:{type:"value"},series:{name:"数量",itemStyle:{normal:{color:"#91cc75",lineStyle:{width:2,color:"#91cc75"}}},data:t.series,type:"line",smooth:!0}})}})}function initArchive(){function t(){"loading..."!==$(".hok_census__filing .button").html()&&$.ajax({url:Hok.BASE_API,type:"POST",dataType:"json",data:{routeType:"article_filing",page:++e},success(t){if(!t.length)return $(".hok_census__filing .item.load").remove(),Qmsg.warning("没有更多内容了");let e="";t.forEach(t=>{e+=`\n\t\t\t\t\t\t\t<div class="item">\n\t\t\t\t\t\t\t\t<div class="tail"></div>\n\t\t\t\t\t\t\t\t<div class="head"></div>\n\t\t\t\t\t\t\t\t<div class="wrapper">\n\t\t\t\t\t\t\t\t\t<div class="panel">${t.date}<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M21.6 772.8c28.8 28.8 74.4 28.8 103.2 0L512 385.6l387.2 387.2c28.8 28.8 74.4 28.8 103.2 0 28.8-28.8 28.8-74.4 0-103.2L615.2 282.4l-77.6-77.6c-14.4-14.4-37.6-14.4-51.2 0l-77.6 77.6L21.6 669.6c-28.8 28.8-28.8 75.2 0 103.2z" /></svg></div>\n\t\t\t\t\t\t\t\t\t<ol class="panel-body">\n\t\t\t\t\t\t\t\t\t\t${t.list.map(t=>`<li><a rel="noopener noreferrer" href="${t.permalink}">${t.title}</a></li>`).join("")}\n\t\t\t\t\t\t\t\t\t</ol>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`}),$("#filing").append(e),$(".hok_census__filing .button").html("加载更多")}})}let e=0;t(),$(".hok_census__filing .button").on("click",function(){t(),$(this).html("loading...")})}function initLeavingPage(){let t=100;const e=["#F8D800","#0396FF","#EA5455","#7367F0","#32CCBC","#F6416C","#28C76F","#9F44D3","#F55555","#736EFE","#E96D71","#DE4313","#D939CD","#4C83FF","#F072B6","#C346C2","#5961F9","#FD6585","#465EFB","#FFC600","#FA742B","#5151E5","#BB4E75","#FF52E5","#49C628","#00EAFF","#F067B4","#F067B4","#ff9a9e","#00f2fe","#4facfe","#f093fb","#6fa3ef","#bc99c4","#46c47c","#f9bb3c","#e8583d","#f68e5f"],o=(t,e)=>Math.floor(Math.random()*(e-t+1))+t,a=$(".hok_detail__leaving-list").width(),i=$(".hok_detail__leaving-list").height(),n=["20px 300px","20px 400px","20px 500px","30px 300px","30px 400px","30px 500px","40px 300px","40px 400px","40px 500px"],s=["300px 20px","400px 20px","500px 20px","300px 30px","400px 30px","500px 30px","300px 40px","400px 40px","500px 40px"];$(".hok_detail__leaving-list .item").each((l,r)=>{const c=o(1,99),d=e[o(0,e.length-1)],u=Math.ceil($(r).width()),m=Math.ceil($(r).height()),p=o(0,i-m),h=o(0,a-u);$(r).css({display:"block",zIndex:c,background:d,top:p,left:h,borderTopLeftRadius:s[o(0,s.length-1)],borderTopRightRadius:n[o(0,n.length-1)],borderBottomLeftRadius:n[o(0,n.length-1)],borderBottomRightRadius:n[o(0,n.length-1)]}),$(r).draggabilly({containment:!0}),$(r).on("dragStart",e=>{t++,$(r).css({zIndex:t})})})}document.addEventListener("DOMContentLoaded",function(){initCustomPage()}),$(document).on("click",".hok_census__filing .content .panel",function(){const t=$(this).parents(".content");t.find(".panel").not($(this)).removeClass("in"),t.find(".panel-body").not($(this).siblings(".panel-body")).stop().hide("fast"),$(this).toggleClass("in").siblings(".panel-body").stop().toggle("fast")});